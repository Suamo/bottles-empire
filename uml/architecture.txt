@startuml
left to right direction

!include <cloudinsight/rabbitmq>
!include <cloudinsight/docker>
!include <cloudinsight/mysql>
'!include <cloudinsight/redis>

node "<$docker>\ndocker" {
'     artifact "<$redis>\nredis" as redis
    database "<$mysql>\nDB" as DB
    artifact "<$rabbitmq>\nMOM" as MOM {
        queue topic
    }
}

frame services {
    artifact BottlesShop <<Service>>
    artifact PlasticWarehouse <<Service>>
    artifact GretaCommittee <<Task>>
    artifact BottlesFactory <<Service>>
}

interface HTTP as http1
interface HTTP as http2

http1 --> BottlesShop
http2 --> PlasticWarehouse
GretaCommittee --> DB
BottlesFactory ..> topic
PlasticWarehouse --> BottlesFactory
topic ..> BottlesShop
topic ..> GretaCommittee

@enduml